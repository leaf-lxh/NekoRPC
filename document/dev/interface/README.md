# NekoRPC 网关接口(interface)开发文档
2020-6-1 v1.0

## 需求
本RPC框架用于构建我的网站后端，以及一些可能在以后会写的服务。这个框架的设计需求为可扩展性和高并发下的可靠性。

此处的可扩展性为不依赖于具体的网络协议，外部的网络可以用各种服务器支持的协议来进行内部服务的访问。

网关与内部网络应当有一个协商的过程，以使网关知道有哪些网络服务存在。协商的过程应当有认证过程，且流量被加密。

## 网关接口的主要逻辑
接收来自外部的使用特定协议（HTTP或自定协议）的服务请求，经过路由决定，反向代理，将服务返回的结果返回给外部网络。

## 服务的发现与注册
网关会维护一个服务路由表（Service Routing Table），用于查询具体的某个服务存在于哪台（些）主机上。这牵扯到一个服务发现的问题。服务发现有两种策略，一种是主动探测模式，另一种是被动注册模式。

在主动探测模式下，管理员应当设置配置文件，定义服务所对应的主机。在被动注册模式下，由服务发起注册请求，在服务端上进行注册。
